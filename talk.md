我想做一个图形界面程序，在linux上运行，功能是获取多个linux服务器上指定路径的日志文件形成列表，并在点击对应的条目后获取日志文件到指定地点（如本机某目录，或指定远程linux服务器路径）。用go和fyne写
底层调用rsync、tar等工具，rsync为3.0.9版及以上，tar为1.26版，还需要调用指定工具。使用配置文件控制访问的服务器和路径、本机临时保存目录的路径（支持文件路径别名）、打包文件命名格式、发送到的服务器和目录、指定工具路径。工作逻辑是每次打开软件时按配置文件更新指定服务器路径下的文件列表，支持手动刷新文件列表；选择指定文件后，下载到本机临时目录，打包压缩并拷贝到指定远程服务器。下载到本机临时目录时，若配置路径别名，则保存路径为“临时目录/hostname/别名/文件”；若未配置别名，则使用文件路径，如“临时目录/hostname/文件路径/文件”。打包文件命名格式支持配置日期如年月日时分秒。还需配置指定工具，该工具可将日志文件转换到stdout。我需要先下载日志，使用该工具将日志文件转换成文本文件，再进行打包。有些linux上需要用到工具，有些不需要。
界面要求，使用apptabs将界面分成文件列表部分和下载列表部分。文件列表部分，左半边为树形结构，列出各服务器目录，点击目录后在右半边列出对应目录下所有文件，左半边上方放置手动刷新按钮；右半边为列表显示，支持用check控件多选（是否能支持鼠标框选、键盘ctrl或shift辅助多选），上边放置下载按钮和添加到下载按钮，下载按钮直接打包拷贝当前页选中文件，添加到下载按钮将选中文件添加到待下载列表。列表中文件的右键菜单为下载和添加到下载选项。下载列表部分为列表显示待下载和已下载文件，添加到待下载列表后在该部分显示所选条目，状态为待下载；上边放置开始下载按钮、停止按钮、打包压缩格式选项、删除、清除已完成按钮。打包压缩格式选项有gzip和xz。按开始下载后，将待下载文件拷贝到本机临时目录，同时文件条目显示下载进度并新建一个打包文件。打包文件在所有文件下载完之前显示为待下载状态，当所有文件下载完开始打包压缩，显示打包进度。当打包完成后将打包文件拷贝到远程服务器，已打包文件的进度部分显示为“已打包到xx文件”，打包文件改为显示拷贝进度。拷贝完成后，打包文件显示已发送。按清除已完成按钮后，将已完成文件清除。停止按钮支持过程中任意时刻停止，包括停止下载文件、停止打包、停止拷贝，停止后未完成文件显示已停止。再按开始按钮可以重新开始未完成步骤，不需要恢复中断。若未下载完文件，则从下载文件重新开始，同时删除未开始的打包文件，新建待开始打包文件。若未完成打包，则删除未完成打包文件，重新开始打包、发送。若未发送完已打包文件，则重新发送已打包文件并覆盖。按删除按钮时删除已选中文件，若未选文件则不动作。该页面文件右键菜单为开始下载、停止、删除、清除已完成。
其他要求，在程序启动时检测配置文件语法，若有错误则提示配置文件哪里有问题
分析一下以上需求，是否有问题，若无问题则给出代码，代码中可以带功能注释

运行程序提示
# command-line-arguments
./main.go:246:57: undefined: archivePath
./main.go:460:2: declared and not used: treeMap
./main.go:463:6: declared and not used: i
./main.go:468:4: declared and not used: uid
是否有未完成部分，完善缺少的部分

运行时提示
main.go:358
Error in Fyne call thread, this should have been called in fyne.Do[AndWait]
main.go:365
Error in Fyne call thread, this should have been called in fyne.Do[AndWait]
main.go:473
Error in Fyne call thread, this should have been called in fyne.Do[AndWait]
优化相关部分代码。
修改文件列表页面，在文件列表部分，去掉立即下载打包按钮，添加到下载列表按钮固定到顶部，不随文件列表滚动。增加手动刷新按钮，功能为刷新当前目录下的文件列表。去掉左边服务器列表顶部的手动刷新。
更改下载逻辑，将所有待下载日志文本拷到本地临时目录后，再打包为一个压缩包，而不是每个文件打包。修改下载页面，分为上下两部分，上部为待下载文件的列表，一条为一个文件，每个文件的进度条为下载进度，并有一个删除按钮。下部为打包文件名配置的文本框，支持调用date工具，以date的label format control sequences 定义文件名中的时间。跟一个打包格式选项，选择gzip或xz，文件名中的扩展名根据下载打包时的选项添加到文件名。接着是开始下载、停止、清除三个按钮。下一行显示状态，开始下载前显示打包文件名预览，打包文件名中的时间使用按开始下载按钮的时间，发送后显示“已发送\打包文件名\”。再下一行为进度条。增加断点续传功能，若在下载日志到本机时停止，则停止下载日志并保持状态，再次点击开始下载按钮后断点续传。若中断下载后点待下载文件的删除，则删除已下载的部分。清除按钮负责清除所有已完成和未完成的下载文件
修改程序逻辑，在程序退出时删除临时保存目录内所有文件

提示打包失败，但没有更详细的说明，将命令的错误在状态部分显示。
打包时将压缩包递归打包了，将压缩包放到另一个临时目录，避免递归打包。同样需要关闭程序后删除临时打包文件。
文件列表页面服务器部分需要以树形显示指定目录下的子目录，另外目录别名显示不全，如配置的sys_logs，只显示logs，要按配置文件中的显示。选择服务器时，文件列表要显示已配置的文件夹，刷新按钮刷新选中服务器的已配置文件夹。文件列表按文件浏览器软件（如thunar）的列表视图修改，列表有名称、大小、类型、修改时间，类型至少有区分文件夹与文件，排列时先排文件夹，再排文件。列表可以按列排序，默认按名称排序。保留check控件。
下载页面中每条文件加一行显示其路径，从服务器到文件名都要。打包文件名输入框后加一个问号图标，鼠标悬浮上去提示“使用date命令格式”或者点击提示

不需要手动排序了，把名称、大小、类型、修改时间改为文字放到表头。修正文件名显示不全，目前所有文件显示为“...”。服务器列表的子目录要递归显示所有子目录，服务器列表配置的目录位置要固定，现在有顺序改变的现象。获取的子目录按文件名排序显示在配置的目录下面。
特定工具是unlzo，看情况修改代码

在文件列表刷新按钮后面加一个文本框，显示当前路径，手动填写后可以去对应路径，若路径不存在则提示不存在且不改变所在路径。文件列表使用fyne的NewTableWithHeaders，列要可调宽度，打开应用时为最小指定宽度。header为名称、大小、类型、修改时间。文件列表改为可以水平滚动查看。
修改使用工具的情况，改为检查下载的文件是否为指定扩展名的文件，若匹配则使用工具转换，不匹配则跳过。需要匹配的扩展名为.lzo，有时会有分卷，如.lzo.0。配置文件格式根据需要修改。
增加菜单，第一项为文件，子菜单为配置和退出。第二项为关于。点击配置打开配置窗口，窗口内容以grid分配置区域，可以向下滚动。全局配置放一个grid里，以文本框形式配置临时目录、目标服务器。临时目录后放一个默认路径按钮。目标服务器后放一个测试按钮，点击测试是否联通。转换工具放一个grid里，放对应的扩展名和工具路径。工具路径后放一个删除按钮。服务器配置部分放一个“添加服务器”按钮，按下后新增一个服务器，配置hostname、name、路径配置。hostname后面放删除该服务器按钮。路径配置放一个“添加路径”按钮，按下后新增一个路径，用文本框配置路径标签和具体路径，文本框占位符为“路径标签”和“路径，如/var/log”。路径文本框后面放删除该路径按钮。配置窗口底部放保存并关闭按钮和取消按钮。按保存则保存配置，保存时检测配置，若有未填项则标红提示。取消按钮为不保存关闭。最后点菜单栏关于打开一个小窗口，写一些关于该程序的信息和一个关闭按钮。

添加到下载时的文件路径不对，显示路径//子目录/文件，增加配置窗口路径检查，对手动输入的路径进行格式化处理。增加路径测试按钮，测试路径是否存在。配置窗口的服务器配置增加测试按钮，主机和用户名改为用户名@主机，使用一个文本框。扩展名匹配逻辑改为后台支持压缩包分卷，配置中只需配置扩展名。正常、非正常路径的都没有下载，打包文件里只有打包的目录，检查下载逻辑。下载窗口恢复名称格式提示和打包格式选项。下载保存路径使用路径标签加子目录，不需要全路径。文件列表的导航栏改为仅显示当前路径，不许手动输入。文件列表每行行头不需要显示Header，列名加粗。没有待下载文件时忽略点击开始下载。

该软件不需要在windows上运行。下载的文件需要按服务器分开，在临时下载目录里的结构为主机名/路径标签/子目录/文件。恢复打包文件名格式提示按钮。修正打包压缩格式为.tar.gz和.tar.xz。完成上传的提示里写上上传文件的文件名。文件页面导航栏不用文本框，改成普通文字显示。进入子目录成功后，路径再改为子目录的。路径进入失败的提示使用rsync返回值，如Permission denied (13)、No such file or directory (2)等。下载文件出错也使用rsync返回的信息。
增加一页日志，对操作的步骤、错误信息等进行记录，保存成日志文件。日志记录格式为“年/月/日 时:分 - INFO/ERROR 信息”。操作步骤记录添加下载文件、已下载文件、转换文件、打包文件、发送文件，错误信息记录获取目录失败、转换失败、打包失败等调用程序返回的错误。在配置窗口增加日志配置，有启用日志选项、日志保存路径（带一个选择文件夹按钮、默认路径按钮）、删除早于指定时间的日志文件（带数字输入框、天月年选项）。若未启用日志，则不记录，日志页面显示为空白。若启用日志，日志保存为每天一个文件，文件名为年-月-日.log。打开程序时，若没有当天的日志则新建，若有日志则继续使用当天日志。打开程序时按配置删除旧日志。默认启用日志，默认路径为./logs
配置窗口中临时目录增加一个文件夹选择按钮。全局配置中增加检查rsync、tar版本的按钮，检查rsync是否为rsync为3.0.9版及以上，tar为1.26版及以上，结果显示为rsync>=3.0.9 ✅/❌ tar>=1.26 ✅/❌。转换工具增加一个测试按钮，检查路径是否正确

修正菜单栏为上一版，修正文件列表列名，修正获取文件列表失败，修正下载页面为上一版。修正配置页面为上一版，在上一版基础上增加日志配置、rsync及tar版本检查、工具路径检查，不需要选择文件夹按钮。若未启用日志，则日志路径、自动删除日志选项为disable。修正配置窗口在主窗口关闭后不关闭

回退至增加日志功能前的版本。该软件不需要在windows上运行。下载的文件需要按服务器分开，在临时下载目录里的结构为主机名/路径标签/子目录/文件。恢复打包文件名格式提示按钮。修正打包压缩格式为.tar.gz和.tar.xz。完成上传的提示里写上上传文件的文件名。文件页面导航栏不用文本框，改成普通文字显示。进入子目录成功后，路径再改为子目录的。路径进入失败的提示使用rsync返回值，如Permission denied (13)、No such file or directory (2)等。
配置窗口中，全局配置中增加检查rsync、tar版本的按钮，检查rsync是否为rsync为3.0.9版及以上，tar为1.26版及以上，结果显示为rsync>=3.0.9 ✅/❌ tar>=1.26 ✅/❌。转换工具增加一个测试按钮，检查路径是否正确。
修正配置窗口在主窗口关闭后不关闭。

很好，在此基础上修改代码。打包文件名格式设置改放到配置窗口全局配置里目标服务器下面，并保存到配置文件中。配置窗口下面按钮加上取消（不保存关闭）。全局配置目标服务器后面加上测试按钮，测试可达性。打包文件格式后面加提示按钮，提示支持的date时间格式。再下面是rsync&tar版本检测按钮。服务器配置中地址后面增加测试按钮，测试地址可达性。每个路径后增加测试按钮，测试路径是否存在。下载页面文件条目显示文件路径、状态（待下载、已下载、转换中、已转换）、下载进度、删除按钮。按开始下载后，将待下载文件拷贝到本机临时目录，文件进度对应下载进度。下载后检查文件扩展名，匹配规则就调用工具转换，文件状态显示转换中和已转换。所有文件下载完后，统一调用tar打包压缩。下方状态栏显示打包中，进度条对应打包文件进度。打包完成后将打包文件拷贝到远程服务器，状态栏显示发送中，进度条对应发送进度。拷贝完成后，状态栏显示已发送xx文件。按清除按钮，将已完成文件清除，同时删除对应下载文件。停止按钮支持任意过程中停止，包括停止下载文件、停止打包、停止拷贝。再按开始按钮可以重新开始未完成步骤。若未下载完文件，则断点续传。若未完成转换，则重新开始转换。若未完成打包，则删除未完成打包文件，重新开始打包。若未发送完已打包文件，则断点续传。菜单增加关于，关于窗口写一些该程序的信息。

很好，在此基础上修改代码。清除已完成时连同空文件夹也清除掉。修正以下报错
main.go:881
Error in Fyne call thread, this should have been called in fyne.Do[AndWait]

修改清除父文件夹，改为打包前清除临时下载目录中的空文件夹，可以调用其他命令，如find

检查代码，有没有可能删除临时目录外文件的可能

在此基础上修改代码。下载页面清除已完成没有清除下载列表。获取目录列表时不要修改窗口名，在刷新按钮后加一个Activity，获取目录时start activity，获取完成后stop activity。文件列表路径显示方式参考fyne demo中打开文件夹窗口中路径显示方式，将文件夹以按钮形式展现，按钮可进入到对应路径。文件列表的路径和下载页面中的路径都以路径标签开始，而不显示实际路径。实现效果为导航栏逐级显示文件夹按钮，如[路径标签][子目录1][子目录2]。给出全部代码

# command-line-arguments
./main.go:354:3: declared and not used: refreshUI
./main.go:466:2: declared and not used: fetchFiles
./main.go:473:8: tree.Disable undefined (type *"fyne.io/fyne/v2/widget".Tree has no field or method Disable)
./main.go:480:10: tree.Enable undefined (type *"fyne.io/fyne/v2/widget".Tree has no field or method Enable)
更新面包屑和fetchfiles不冲突吧，进入目录后再根据路径更新面包屑。获取目录时不需要禁用部分交互

panic: runtime error: index out of range [-1]

goroutine 1 [running, locked to thread]:
main.main.func15({0x1b08258?, 0xc00004d5d8?}, {0xe56800?, 0xc002420c30?})
	/home/carlnerv/go/pigeonPiper/main.go:542 +0xfa
fyne.io/fyne/v2/widget.(*Table).updateHeader(0xc68f40?, {0xc000a6ea20?, 0xc00004d818?}, {0xe56800?, 0xc002420c30?})
	/home/carlnerv/go/pkg/mod/fyne.io/fyne/v2@v2.7.2/widget/table.go:804 +0x13a
fyne.io/fyne/v2/widget.(*tableCellsRenderer).refreshForID(0xc000260700, {0x444e360044790600?, 0x4280d000420c5000?})
	/home/carlnerv/go/pkg/mod/fyne.io/fyne/v2@v2.7.2/widget/table.go:1379 +0xa7b
fyne.io/fyne/v2/widget.(*tableCellsRenderer).Refresh(0xe58ce0?)
	/home/carlnerv/go/pkg/mod/fyne.io/fyne/v2@v2.7.2/widget/table.go:1256 +0x1f
fyne.io/fyne/v2/widget.(*BaseWidget).Refresh(0xc0002548e0?)
	/home/carlnerv/go/pkg/mod/fyne.io/fyne/v2@v2.7.2/widget/widget.go:127 +0x52
fyne.io/fyne/v2/widget.(*tableCells).Refresh(...)
	/home/carlnerv/go/pkg/mod/fyne.io/fyne/v2@v2.7.2/widget/table.go:1188
fyne.io/fyne/v2/widget.(*tableRenderer).Refresh(0xc0002548e0)
	/home/carlnerv/go/pkg/mod/fyne.io/fyne/v2@v2.7.2/widget/table.go:1110 +0x165
fyne.io/fyne/v2/widget.(*BaseWidget).Refresh(0xc05340?)
	/home/carlnerv/go/pkg/mod/fyne.io/fyne/v2@v2.7.2/widget/widget.go:127 +0x52
main.main.func9.1.2()
	/home/carlnerv/go/pigeonPiper/main.go:476 +0x465
fyne.io/fyne/v2/internal/driver/glfw.(*gLDriver).runGL(0xc00004dbe8?)
	/home/carlnerv/go/pkg/mod/fyne.io/fyne/v2@v2.7.2/internal/driver/glfw/loop.go:149 +0x185
fyne.io/fyne/v2/internal/driver/glfw.(*gLDriver).Run(0xc000328420)
	/home/carlnerv/go/pkg/mod/fyne.io/fyne/v2@v2.7.2/internal/driver/glfw/driver.go:162 +0x72
fyne.io/fyne/v2/app.(*fyneApp).Run(0xc0003284d0)
	/home/carlnerv/go/pkg/mod/fyne.io/fyne/v2@v2.7.2/app/app.go:77 +0x102
fyne.io/fyne/v2/internal/driver/glfw.(*window).ShowAndRun(0xc0002dc9c0)
	/home/carlnerv/go/pkg/mod/fyne.io/fyne/v2@v2.7.2/internal/driver/glfw/window.go:217 +0x64
main.main()
	/home/carlnerv/go/pigeonPiper/main.go:895 +0x1d5b
exit status 2

修改面包屑的样式为普通按钮，面包屑前面放一个文本，显示当前服务器，不可点击，整体样式如 hostname:[路径标签][子目录]。获取文件列表后，将服务器列表已选项取消选择。
恢复子目录第一行的返回项、恢复配置窗口、恢复待下载文件显示路径里的服务器名
添加到下载时检测文件是否在下载列表，避免重复添加。

/*
检查转换逻辑，修正清除已完成
main.go:845
Error in Fyne call thread, this should have been called in fyne.Do[AndWait]
包进fyne.Do
更换配置页。恢复关于。调整文件列表导航栏、表头
*/
修改文件状态枚举，改为待下载、下载中、转换中、已完成。转换逻辑中，如果文件不匹配转换规则，则直接把文件改为已完成状态；需要转换时，才显示转换中，转换完也显示已完成状态。

配置窗口在这版上修改，修改临时路径为固定使用本应用程序文件夹内的路径，不需要配置。目的地址支持本地路径。

// 配置窗口中目的地址如果为空，使用./downloads路径
// 配置窗口中路径标签为空，则使用路径最后一个文件夹名

修改上传部分代码，如果目的路径是远程则上传，如果是本地则mv压缩包至本地路径（若路径不存在则先建立）